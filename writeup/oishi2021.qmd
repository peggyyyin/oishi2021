---
title: "Replication of Figure–Ground Illusion Study by Oishi et al. (2021, Psychological Science)"
author: "Peggy Yin (peggyyin@stanford.edu)"
date: "`r format(Sys.time(), '%B %d, %Y')`"
format:
  html:
    toc: true
    toc_depth: 3
---

<!-- Replication reports should all use this template to standardize reporting across projects.  These reports will be public supplementary materials that accompany the summary report(s) of the aggregate results. -->

## Introduction
Oishi et al. (2021) proposed that psychological richness—a life filled with variety, interesting experiences, and perspective change (both positive and negative)—is a distinct component of a good life, separate from happiness and meaning. The work directly connects to my research interest in the psychology of self-concept redefinition. I chose the figure–ground illusion study because it demonstrates that psychological richness can result from individuals recognizing multiple interpretations of a simple images in a short amount of time. Because my broader interests concern aesthetic reframing, and this experiment captures that process at a basic perceptual level. By showing that ambiguous visual stimuli can evoke a sense of richness without altering happiness or meaning, the study provides a minimal yet powerful model of how reinterpretation can contribute to well-being. 

The stimuli will be four figure-ground illusions where two-thirds of the participants see a figure-ground illusion (where both the foreground and background can be focused on, and a different image is produced depending on the focus), and the other one-third see altered images where the background image is disrupted, so that only the foreground focus will produce an image. The procedure will require participants to view and describe each of the four drawings, then self-report their moods and aesthetic evaluations of the image. One-third of the participants viewing the figure-ground images will be further prompted with the question “What else do you see?" Psychological richness will then be measured based on the mean of 11 items from the Psychological Richess Questionnaire (interesting, boring[r], intriguing, psychologically rich, complex, fresh, unique, surprised, unusual, typical[r], simple[r]) on a 1–5 point scale. Positive affect will be measured as the mean of 6 items from the SPANE (Diener et al., 2010): positive, good, pleasant, happy, joyful, content, on a 1–5 point scale. The challenges will be making sure I am replicating the study correctly, because the original study was split into two parts where participants were split in half, whereas my replication combines the two studies into one study where participants are divided in thirds. Moreover, I will need to email the authors for 3/4 of the stimuli used.

Replication Repository: [GitHub](https://github.com/peggyyyin/oishi2021)

Original Paper: [Paper](https://github.com/peggyyyin/oishi2021/tree/main/original_paper)

## Methods

### Power Analysis

Our sample size provides the statistical power of .85 with the expected effect size of .50.

### Planned Sample

The planned sample size is 150, matching the original study.

### Materials

All figures are attached in the figures folder.

### Procedure	

I am replicating experiment 3, where the visual materials for the control condition were modified from the ones used in Experiments 1 and 2 to further minimize the differences from the figure-ground drawings.

"The current moods were measured using the 12-item Scale of Positive and Negative Experience (SPANE; Diener et al., 2010) on a 5-point scale (1 = not at all, 5 = extremely). The positive mood scale consists of positive, good, pleasant, happy, joyful, and contented at this moment (α = .90). The negative mood scale consists of negative, bad, unpleasant, sad, afraid, and angry at this moment (α = .85).

The psychological richness was measured by 11 items on a 5-point scale (1 = not at all, 5 = extremely): “The drawings were very interesting,” “They were very boring (r),” “They were intriguing,” “They were psychologically rich,” “They were complex,” “They were fresh,” “They were unique,” “I was surprised by them,” “They were unusual,” “They were typical (r),” and “They were simple (r)” (α = .88).

We also measured enjoyment, as Silva and colleagues’ work (e.g., Silvia, 2005) suggests that enjoyment is independent of interest. The enjoyment scale consisted of the four items on a 5-point scale (1 = not at all, 5 = extremely): “I enjoyed them a lot,” “I liked them a lot,” “They were fun,” and “They were pleasing” (α = .88)."

### Analysis Plan

I plan to analyze the differences in Psychological Richness and Enjoyment in the Control versus Figure-Ground Conditions, and the differences in positive and negative affect in figure-ground condition.

### Differences from Original Study

The participants in the original study were 150 at a large university in the U.S. who received partial course credit toward an introductory psychology class. My sample pulls from Prolific and specifies people in the US more generally.

### Methods Addendum (Post Data Collection)

You can comment this section out prior to final report with data collection.

#### Actual Sample
  Sample size, demographics, data exclusions based on rules spelled out in analysis plan

#### Differences from pre-data collection methods plan
  Any differences from what was described as the original plan, or “none”.


## Results


### Data preparation

Data preparation following the analysis plan.
	
```{r include=F}
### Data Preparation

#### Load Relevant Libraries and Functions
pkgs <- c("tidyverse", "janitor", "stringr", "psych", "ggpubr", "patchwork")
to_install <- pkgs[!pkgs %in% installed.packages()[, "Package"]]
if (length(to_install)) install.packages(to_install, quiet = TRUE)
invisible(lapply(pkgs, library, character.only = TRUE))

DEBUG <- TRUE
dbg <- function(...){ if (isTRUE(DEBUG)) message(sprintf(...)) }

# pretty head for long vectors
vhead <- function(x, n=6) paste(utils::head(x, n), collapse=" | ")

# standard error
se <- function(x) sd(x, na.rm = TRUE) / sqrt(sum(!is.na(x)))

#### Import data
input_path <- "../data/pilot.csv"
output_dir <- "."

#### Data exclusion / filtering
raw <- read.csv(input_path, header = FALSE, stringsAsFactors = FALSE, check.names = FALSE)

# ---- Metadata rows → vectors ----
label_row    <- as.character(unlist(raw[1, ]))           # e.g., mood_1, ratings_1, ...
question_row <- tolower(as.character(unlist(raw[2, ])))  # question texts (lowercased)

# ---- Keep only data rows; set headers to labels; clean names ----
dat <- raw[-c(1:3), , drop = FALSE]
colnames(dat) <- label_row
dat <- janitor::clean_names(dat)

# After clean_names(), get the current column names in order
cn <- names(dat)

# ---- Use the QUESTION ROW to identify item sets (by index, then map to names) ----
idx_sp_pos <- str_detect(question_row, "positive|\\bgood\\b|pleasant|happy|joyful|contented")
idx_sp_neg <- str_detect(question_row, "\\bnegative\\b|\\bbad\\b|unpleasant|\\bsad\\b|afraid|angry")

idx_pr_pos <- str_detect(question_row, "interesting|intriguing|psychologically\\s*rich|complex|fresh|unique|surprised|unusual")
idx_pr_rev <- str_detect(question_row, "\\bboring\\b|\\btypical\\b|\\bsimple\\b")

idx_enjoy  <- str_detect(question_row, "enjoyed|liked|\\bfun\\b|pleasing")

sp_pos_cols <- cn[idx_sp_pos]
sp_neg_cols <- cn[idx_sp_neg]
pr_pos_cols <- cn[idx_pr_pos]
pr_rev_cols <- cn[idx_pr_rev]
enjoy_cols  <- cn[idx_enjoy]

# ---- Coerce needed columns to numeric (handles text labels like 'Not at all') ----
all_needed <- unique(c(sp_pos_cols, sp_neg_cols, pr_pos_cols, pr_rev_cols, enjoy_cols))

# Define mapping from text to numbers
likert_map <- c(
  "not at all"  = 1,
  "slightly"    = 2,
  "moderately"  = 3,
  "very much"   = 4,
  "extremely"   = 5
)

dat[all_needed] <- lapply(dat[all_needed], function(v) {
  v <- tolower(trimws(as.character(v)))
  # convert using dictionary; leave numbers alone
  num <- dplyr::recode(v, !!!likert_map, .default = NA_real_)
  suppressWarnings(as.numeric(num))
})

# ✅ Debug check to ensure conversion worked
if (exists("DEBUG") && DEBUG) {
  cat("\n=== CHECK: Likert text → numeric conversion ===\n")
  test_cols <- head(all_needed, 5)
  print(dat %>% dplyr::select(any_of(test_cols)) %>% head())
}
# ---- Helpers ----
rev5  <- function(x) ifelse(is.na(x), NA_real_, 6 - as.numeric(x))
rmean <- function(df) if (is.null(df) || ncol(df) == 0) NA_real_ else rowMeans(df, na.rm = TRUE)
filled <- function(x) !is.na(x) & x != ""

# ---- Compute scale scores per row ----
pr_pos_df <- dplyr::select(dat, dplyr::all_of(pr_pos_cols))
pr_rev_df <- dplyr::select(dat, dplyr::all_of(pr_rev_cols)) %>% dplyr::mutate(dplyr::across(dplyr::everything(), rev5))

dat <- dat %>%
  mutate(
    positive_affect = rmean(select(., all_of(sp_pos_cols))),
    negative_affect = rmean(select(., all_of(sp_neg_cols))),
    psych_richness  = rmean(dplyr::bind_cols(pr_pos_df, pr_rev_df)),
    enjoyment       = rmean(select(., all_of(enjoy_cols)))
  )

# ---- Assign condition (control vs figure-ground) ----
has_ctrl <- if ("drawing1_response" %in% names(dat)) filled(dat$drawing1_response) else FALSE
has_alt  <- if ("drawing1alt_response" %in% names(dat)) filled(dat$drawing1alt_response) else FALSE

dat <- dat %>%
  mutate(
    condition = dplyr::case_when(
      has_ctrl ~ "Control",
      !has_ctrl & has_alt ~ "FigureGround",
      TRUE ~ NA_character_
    )
  )

# ---- Summaries for plotting (mean ± SE) ----
se <- function(x) sd(x, na.rm = TRUE) / sqrt(sum(!is.na(x)))

sum_long <- dat %>%
  filter(!is.na(condition)) %>%
  select(condition, psych_richness, enjoyment, positive_affect, negative_affect) %>%
  pivot_longer(-condition, names_to = "measure", values_to = "value") %>%
  group_by(condition, measure) %>%
  summarize(
    mean = mean(value, na.rm = TRUE),
    se   = se(value),
    .groups = "drop"
  ) %>%
  mutate(
    measure = recode(measure,
                     psych_richness  = "PsychRich",
                     enjoyment       = "Enjoyment",
                     positive_affect = "SPANE+",
                     negative_affect = "SPANE−")
  )
```

### Confirmatory analysis

```{r include=T}
# ---- Summaries for plotting (mean ± SE) ----
se <- function(x) sd(x, na.rm = TRUE) / sqrt(sum(!is.na(x)))

sum_long <- dat %>%
  filter(!is.na(condition)) %>%
  select(condition, psych_richness, enjoyment, positive_affect, negative_affect) %>%
  pivot_longer(-condition, names_to = "measure", values_to = "value") %>%
  group_by(condition, measure) %>%
  summarize(
    mean = mean(value, na.rm = TRUE),
    se   = se(value),
    .groups = "drop"
  ) %>%
  mutate(
    measure = recode(measure,
                     psych_richness  = "PsychRich",
                     enjoyment       = "Enjoyment",
                     positive_affect = "SPANE+",
                     negative_affect = "SPANE−")
  )

# ---- Plot A: Psych Richness & Enjoyment (bars with SE) ----
plot_a <- sum_long %>%
  filter(measure %in% c("PsychRich", "Enjoyment")) %>%
  ggplot(aes(x = measure, y = mean, fill = condition)) +
  geom_col(position = position_dodge(width = 0.7), width = 0.6) +
  geom_errorbar(aes(ymin = mean - se, ymax = mean + se),
                position = position_dodge(width = 0.7), width = 0.2) +
  labs(title = "Figure-Ground and Psych Richness/Enjoyment",
       x = NULL, y = "Mean (1–5)", fill = NULL) +
  theme_minimal(base_size = 12)

ggsave("../data/bars_psychrich_enjoyment.png", plot_a, width = 8, height = 5, dpi = 300)

# ---- Plot B: Positive & Negative Affect (bars with SE) ----
plot_b <- sum_long %>%
  filter(measure %in% c("SPANE+","SPANE−")) %>%
  ggplot(aes(x = measure, y = mean, fill = condition)) +
  geom_col(position = position_dodge(width = 0.7), width = 0.6) +
  geom_errorbar(aes(ymin = mean - se, ymax = mean + se),
                position = position_dodge(width = 0.7), width = 0.2) +
  labs(title = "Figure-Ground and Affect (SPANE)",
       x = NULL, y = "Mean (1–5)", fill = NULL) +
  theme_minimal(base_size = 12)

ggsave("../data/bars_spane_affect.png", plot_b, width = 8, height = 5, dpi = 300)

message("✅ Saved plots:\n - bars_psychrich_enjoyment.png\n - bars_spane_affect.png")

# ---- Plot A ----
print(plot_a)  # <— this displays the plot in the RPub output
ggsave("../data/bars_psychrich_enjoyment.png", plot_a, width = 8, height = 5, dpi = 300)

# ---- Plot B ----
print(plot_b)
ggsave("../data/bars_spane_affect.png", plot_b, width = 8, height = 5, dpi = 300)

# Long raw values (no summarizing)
raw_long <- dat %>%
  dplyr::filter(!is.na(condition)) %>%
  dplyr::select(condition, psych_richness, enjoyment, positive_affect, negative_affect) %>%
  tidyr::pivot_longer(-condition, names_to = "measure", values_to = "value") %>%
  dplyr::mutate(
    measure = dplyr::recode(
      measure,
      psych_richness  = "PsychRich",
      enjoyment       = "Enjoyment",
      positive_affect = "SPANE+",
      negative_affect = "SPANE−"
    )
  ) %>%
  dplyr::filter(!is.na(value))

# collapse duplicates into counts
raw_long_counts <- raw_long %>%
  group_by(condition, measure, value) %>%
  summarize(n = n(), .groups = "drop")
plot_a <- raw_long_counts %>%
  filter(measure %in% c("PsychRich", "Enjoyment")) %>%
  ggplot(aes(x = measure, y = value, color = condition, size = n)) +
  geom_point(
    position = position_dodge(width = 0.6),
    alpha = 0.8
  ) +
  scale_size_continuous(range = c(2, 8), name = "n") +
  scale_y_continuous(breaks = 1:5, limits = c(1, 5)) +
  labs(
    title = "Figure-Ground and Psych Richness/Enjoyment",
    x = NULL, y = "Rating (1–5)", color = NULL
  ) +
  theme_minimal(base_size = 12)

print(plot_a)
ggsave("../data/dotsize_psychrich_enjoyment.png", plot_a, width = 8, height = 5, dpi = 300)

plot_b <- raw_long_counts %>%
  filter(measure %in% c("SPANE+","SPANE−")) %>%
  ggplot(aes(x = measure, y = value, color = condition, size = n)) +
  geom_point(
    position = position_dodge(width = 0.6),
    alpha = 0.8
  ) +
  scale_size_continuous(range = c(2, 8), name = "n") +
  scale_y_continuous(breaks = 1:5, limits = c(1, 5)) +
  labs(
    title = "Figure-Ground and Affect (SPANE)",
    x = NULL, y = "Rating (1–5)", color = NULL
  ) +
  theme_minimal(base_size = 12)

print(plot_b)
ggsave("../data/dotsize_spane_affect.png", plot_b, width = 8, height = 5, dpi = 300)


```

*Side-by-side graph with original graph is ideal here*

### Exploratory analyses

Any follow-up analyses desired (not required).  

## Discussion

### Summary of Replication Attempt

Open the discussion section with a paragraph summarizing the primary result from the confirmatory analysis and the assessment of whether it replicated, partially replicated, or failed to replicate the original result.  

### Commentary

Add open-ended commentary (if any) reflecting (a) insights from follow-up exploratory analysis, (b) assessment of the meaning of the replication (or not) - e.g., for a failure to replicate, are the differences between original and present study ones that definitely, plausibly, or are unlikely to have been moderators of the result, and (c) discussion of any objections or challenges raised by the current and original authors about the replication attempt.  None of these need to be long.
